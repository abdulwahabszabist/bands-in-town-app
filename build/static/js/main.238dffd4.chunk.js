(this["webpackJsonpbands-in-town"]=this["webpackJsonpbands-in-town"]||[]).push([[0],{106:function(e,t,a){e.exports=a.p+"static/media/logo.91ed5648.svg"},127:function(e,t,a){e.exports=a(161)},133:function(e,t,a){},160:function(e,t,a){},161:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"BASE_URL",(function(){return p})),a.d(n,"APP_ID",(function(){return v}));var r=a(0),c=a.n(r),o=a(13),i=a.n(o),l=a(46),s=a(49),m=a(40),u=a(210),d=a(211),p="https://rest.bandsintown.com",v="bands_in_town",E=a(69),f=a(108),h=Object(f.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:E.a.A400},background:{default:"#fff"}}}),b=c.a.createContext("AppContext"),g=n,y=a(31);var w=a(215),j=a(216),O=a(217),x=a(186),N=a(218),A=a(187),_=a(188),I=a(214),S=a(189),k=a(219),C=a(190),F=a(94),L=(w.a(console.log),j.a(O.a,x.a)),M=N.a(L),R=(A.a(_.a(Object),I.a(S.a,k.a(L)),k.a(L)),A.a(_.a(Object),I.a(S.a,k.a(M)),k.a(M)),C.a((function(e){return Object.keys(F.a([],e)).map((function(t){return e[t]?"".concat(t," "):""})).join("").trim()})),a(41)),D=a.n(R),P=a(111),B=a(220),T=a(191),W="TOGGLE_APP_LOADING",z="FETCH_ARTIST_INFO",U="FETCH_EVENT_INFO";function G(e){var t;return D.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.t0=D.a,a.next=4,D.a.awrap(fetch(e));case 4:return a.t1=a.sent,a.next=7,a.t0.awrap.call(a.t0,a.t1);case 7:return t=a.sent,a.abrupt("return",t.json());case 11:a.prev=11,a.t2=a.catch(0),console.error("Error while fetching data: ",a.t2);case 14:case"end":return a.stop()}}),null,null,[[0,11]])}var Y=function(e){return{type:W,payload:e}},V=function(e){return function(t,a){var n,r;return D.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t(Y(!0)),a.next=3,D.a.awrap(G("".concat(g.BASE_URL,"/artists/").concat(e,"?app_id=").concat(g.APP_ID)));case 3:if(n=a.sent,r=[],!M(n)){a.next=9;break}return a.next=8,D.a.awrap(G("".concat(g.BASE_URL,"/artists/").concat(e,"/events?app_id=").concat(g.APP_ID)));case 8:r=a.sent;case 9:t({type:z,payload:{artist:n,events:r}}),M(n)&&localStorage.setItem("artist",e),t(Y(!1));case 12:case"end":return a.stop()}}))}},H=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.type,n=t.payload;switch(a){case W:return Object(y.a)({},e,{isLoading:n});case U:return Object(y.a)({},e,{selectedEvent:n});case z:return Object(y.a)({},e,{},n);default:return e}},J=(a(133),a(97)),K=a(193),Z=a(221),$=a(222),q=a(195),Q=a(196),X=a(113),ee=a(198),te=a(199),ae=a(200),ne=a(201),re=a(204),ce=a(205),oe=a(202),ie=a(55),le=a.n(ie),se=a(99),me=a(107),ue=a(16),de=a(212),pe=a(100),ve=a.n(pe),Ee=a(95),fe=a.n(Ee),he=a(96),be=a.n(he),ge=a(110),ye=function(e){var t=e.width,a=void 0===t?18:t,n=e.display,r=void 0===n?"initial":n,o=e.component,i=Object(ge.a)(e,["width","display","component"]),l=Object(y.a)({width:a,display:r},i.style||{});return c.a.createElement("img",Object.assign({alt:"",src:o,style:l},i))},we=a(109),je=a(197),Oe=Object(J.a)((function(e){return{searchInput:{margin:e.spacing(1),backgroundColor:"#fff",borderRadius:5},container:{marginTop:e.spacing(2),marginBottom:e.spacing(2),zIndex:10},card:{minWidth:275,maxWidth:350},title:{fontSize:14},text:{color:"#fff"}}})),xe=function(e){e.history;var t=e.lastSearchArtist,a=Oe(),n=Object(r.useRef)(t),o=Object(r.useState)(null),i=Object(l.a)(o,2),m=i[0],u=i[1],d=Object(r.useState)([]),p=Object(l.a)(d,2),v=p[0],E=p[1],f=Object(r.useContext)(b),h=f.state,g=h.isLoading,y=h.artist,w=void 0===y?{}:y,j=h.events,O=void 0===j?[]:j,x=f.dispatch;Object(r.useEffect)((function(){E(O)}),[O]);return c.a.createElement("div",{className:"home-container",style:{backgroundImage:"url(".concat(w.image_url,")")}},M(w)&&c.a.createElement("div",{className:"artist-backlay",style:{backgroundImage:"url(".concat(w.image_url,")")}}),c.a.createElement(K.a,{maxWidth:"sm",className:a.container},c.a.createElement(Z.a,{fullWidth:!0,className:a.searchInput,variant:"outlined"},c.a.createElement($.a,{placeholder:"Search Artists...",id:"outlined-adornment-amount",defaultValue:n.current,onChange:Object(se.a)(1e3,!1,(function(){var e;e=n.current.value,x(V(e))})),inputProps:{ref:n},startAdornment:c.a.createElement(q.a,{position:"start"},c.a.createElement(ve.a,null))}))),g?c.a.createElement("div",{className:"cover-all"},c.a.createElement(Q.a,null)):c.a.createElement(K.a,{maxWidth:"lg",className:a.container},L(Object(je.a)("","value",n.current))?c.a.createElement(X.a,null,"Search any Artist to view its upcoming events"):L(w)&&M(Object(je.a)("","value",n.current))?c.a.createElement(X.a,null,"No Artist exists with name ",c.a.createElement("b",null,Object(je.a)("","value",n.current))):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"artist-info"},c.a.createElement(X.a,{className:a.text,variant:"h1"},w.name),c.a.createElement("div",{className:"actions"},c.a.createElement(ee.a,{href:w.url},c.a.createElement(te.a,{variant:"round"},c.a.createElement(ye,{component:be.a,width:20,heigth:20}))),c.a.createElement(ee.a,{href:w.facebook_page_url},c.a.createElement(te.a,{variant:"round"},c.a.createElement(ye,{component:fe.a,width:25,heigth:25}))))),L(O)?c.a.createElement(X.a,{className:a.text,variant:"subtitle1"},"No upcoming events found of this Artist"):c.a.createElement(c.a.Fragment,null,c.a.createElement(ae.a,{container:!0,justify:"space-between",alignItems:"center",className:"events-header"},c.a.createElement(ne.a,{badgeContent:w.upcoming_event_count,color:"primary"},c.a.createElement(X.a,{className:a.text,variant:"subtitle1"},"Upcoming Events")),c.a.createElement(ue.a,{utils:me.a},c.a.createElement(de.a,{label:"Search Events from",format:"MMM dd, yyyy",value:m,onChange:function(e){u(e);var t=Object(we.a)((function(t){return le()(t.datetime).isAfter(e)}),O);E(t)}}))),c.a.createElement(ae.a,{container:!0,className:"upcoming-events",spacing:3},c.a.createElement(ae.a,{item:!0,xs:12},L(v)&&M(O)&&c.a.createElement(X.a,{className:a.text,variant:"h5"},"No events found beyond searched date"),L(O)&&c.a.createElement(X.a,{className:a.text,variant:"h5"},w.name," has no upcoming events")),v.map((function(e){var t=le()(e.datetime);return c.a.createElement(ae.a,{item:!0,xs:12,sm:12,md:6,className:"event-row",key:e.id},c.a.createElement(re.a,null,c.a.createElement(ce.a,{className:"content"},c.a.createElement("div",{className:"event-date"},c.a.createElement("span",{className:"month"},t.format("MMM")),c.a.createElement("span",{className:"day"},t.format("D"))),c.a.createElement(X.a,{variant:"h5"},e.venue.name),c.a.createElement(s.b,{to:"/event/".concat(e.id)},c.a.createElement(oe.a,{variant:"contained",color:"primary"},"View Event")))))})))))))},Ne=a(206),Ae=a(207),_e=a(208),Ie=a(104),Se=a.n(Ie),ke=a(105),Ce=a.n(ke),Fe=a(213),Le=Object(J.a)({card:{width:"100%"},media:{height:140}}),Me=function(e){var t=e.text;return c.a.createElement("div",{title:t,style:{color:"red",display:"inline-flex",textAlign:"center",alignItems:"center",justifyContent:"center",borderRadius:"100%",transform:"translate(-50%, -50%)"}},c.a.createElement(Ce.a,null))},Re=function(e){var t=e.match,a=Le(),n=Object(r.useContext)(b),o=n.state,i=o.selectedEvent,l=void 0===i?{}:i,s=o.events,m=void 0===s?[]:s,u=o.isLoading,d=void 0!==u&&u,p=n.dispatch;Object(r.useEffect)((function(){p(function(e){return function(t,a){var n,r;return D.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:t(Y(!0)),n=Object(P.a)([],["events"],a()),r=Object(B.a)(Object(T.a)("id",e),n),t({type:U,payload:r}),t(Y(!1));case 5:case"end":return c.stop()}}))}}(t.params.id))}),[m]);var v=l.artist,E=void 0===v?{}:v,f=l.datetime,h=l.venue,g=void 0===h?{}:h,y=(l.id,l.url),w=l.lineup,j=void 0===w?[]:w;return c.a.createElement("div",{className:"event-container"},d?c.a.createElement("div",{className:"cover-all"},c.a.createElement(Q.a,null)):c.a.createElement(K.a,{maxWidth:"lg"},c.a.createElement(ae.a,{container:!0,spacing:4},c.a.createElement(ae.a,{item:!0,xs:12,sm:12,md:4},c.a.createElement(re.a,{className:a.card},c.a.createElement(Ne.a,null,c.a.createElement(Ae.a,{variant:"outlined",className:a.media,image:E.image_url||"https://s3.amazonaws.com/bit-photos/artistThumb.jpg",title:"Artist Image"}),c.a.createElement(ce.a,null,c.a.createElement(X.a,{gutterBottom:!0,variant:"h4",color:"primary"},E.name),c.a.createElement(X.a,{variant:"body1",component:"p"},le()(f).format("MMM DD, YYYY")," @ ",g.name),c.a.createElement(X.a,{variant:"body2",component:"h2"},c.a.createElement("b",null,"Lineup:")," ",Object(Fe.a)(", ",j)),c.a.createElement(X.a,{variant:"body2",color:"primary",component:"p"},g.city,", ",g.region))),c.a.createElement(_e.a,null,c.a.createElement(ee.a,{href:y},c.a.createElement(oe.a,{size:"small",color:"primary"},"Learn More"))))),c.a.createElement(ae.a,{item:!0,xs:12,sm:12,md:8},c.a.createElement("div",{style:{width:"100%",height:"400px"}},c.a.createElement(Se.a,{bootstrapURLKeys:{key:"AIzaSyAiWUn_8yzwpEo8Dk0OI5sbV2Ys67tIHp8"},defaultCenter:{lat:parseFloat(Object(je.a)(53,"latitude",g)),lng:parseFloat(Object(je.a)(54,"longitude",g))},defaultZoom:11},c.a.createElement(Me,{lat:g.latitude,lng:g.longitude,text:g.name})))))))},De=a(209),Pe=a(203),Be=a(106),Te=a.n(Be),We=Object(J.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})),ze=function(){var e=We();return c.a.createElement(De.a,{position:"static"},c.a.createElement(Pe.a,null,c.a.createElement(s.b,{to:"/"},c.a.createElement(ye,{component:Te.a,width:"24",height:"24"})),"\xa0 \xa0",c.a.createElement(X.a,{variant:"h6",className:e.title},"Bands In Town")))};var Ue=function(){var e=function(e,t){var a=Object(r.useReducer)(e,t),n=Object(l.a)(a,2),c=n[0],o=n[1],i=Object(r.useRef)(),s=Object(r.useCallback)((function(e){return"function"===typeof e?e(s,(function(){return i.current.state})):e.type?(i.current.prevState=i.current.state,i.current.action=e,void o(e)):void 0}),[]);return Object(r.useMemo)((function(){if(i.current&&i.current.action&&i.current.prevState){var e=Object(y.a)({},i.current);console.groupCollapsed("%c action %c".concat(e.action.type," %c@"),"color:#81c784;font-weight:normal;","font-weight:bold;","color:#7F7F7F;font-weight:normal;"),console.log("%c prev state","color:#9C9D9D;font-weight:bold;",e.prevState),console.log("%c action    ","color:#0092FF;font-weight:bold;",e.action),console.log("%c next state","color:#15C050;font-weight:bold;",c),console.groupEnd()}i.current={}}),[c]),i.current.state=c,[c,s]}(H,{isLoading:!1,events:[],artist:{}}),t=Object(l.a)(e,2),a=t[0],n=t[1],o=localStorage.getItem("artist");Object(r.useEffect)((function(){M(o)&&n(V(o))}),[]);var i={state:a,dispatch:n};return c.a.createElement(b.Provider,{value:i},c.a.createElement(u.a,{theme:h},c.a.createElement("div",{className:"App"},c.a.createElement(d.a,null),c.a.createElement(s.a,{basename:"/"},c.a.createElement(ze,null),c.a.createElement(m.d,null," //these are redirecting urls. this triggers whenever any static url is entered into browser",c.a.createElement(m.b,{exact:!0,path:"/",render:function(){return c.a.createElement(xe,{lastSearchArtist:o})}}),c.a.createElement(m.b,{exact:!0,path:"/event/:id",component:Re}),c.a.createElement(m.b,{exact:!0,path:"*",render:function(){return c.a.createElement(m.a,{to:"/"})}}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(160);i.a.render(c.a.createElement(Ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},95:function(e,t,a){e.exports=a.p+"static/media/facebook.809ea75e.svg"},96:function(e,t,a){e.exports=a.p+"static/media/bitFist.2a8d630c.svg"}},[[127,1,2]]]);
//# sourceMappingURL=main.238dffd4.chunk.js.map